{"version":3,"sources":["store/constants/user.js","store/reducers/auth.js","store/reducers/message.js","store/reducers/onlineUsers.js","store/index.js","hocs/auth.js","api/chat.js","api/auth.js","components/Message.jsx","components/FieldMessageSend.jsx","pages/Chat/index.jsx","store/actions/auth.js","pages/Login/index.jsx","App.js","index.js"],"names":["initialState","user","localStorage","getItem","JSON","parse","token","list","rootReducer","combineReducers","auth","state","payload","type","userTypes","messages","message","map","_id","messageId","Object","assign","read","onlineUsers","users","find","id","slice","filter","store","createStore","composeWithDevTools","applyMiddleware","thunk","isAuthHoc","Component","props","useSelector","exact","to","socketAPI","connectClb","disconnectClb","this","socket","io","process","getState","Promise","resolve","reject","on","error","disconnect","event","data","emit","response","console","fun","api","axios","create","responseType","baseURL","name","post","Text","Typography","Paragraph","Message","date","author","content","video","Item","Meta","avatar","style","backgroundColor","icon","UserOutlined","title","strong","description","width","height","src","frameBorder","moment","format","CheckOutlined","marginLeft","FieldMessageSend","disabledSend","Form","useForm","form","onFinish","values","resetFields","rules","required","size","placeholder","suffix","htmlType","SendOutlined","disabled","Content","Layout","Footer","Sider","Title","styles","textInSideBar","color","buttonInSideBar","margin","dispatch","useDispatch","useState","disableSend","closedSidebar","closeSidebar","useEffect","connect","catch","e","log","lastsMessages","forEach","animateScroll","scrollToBottom","containerId","display","flexGrow","collapsible","onCollapse","collapsed","onClick","typesUser","clear","shape","LogoutOutlined","level","paddingLeft","split","renderItem","dataSource","maxHeight","overflowY","locale","emptyText","Login","userName","then","setItem","stringify","login","label","App","className","basename","path","component","Chat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d0d187fe.chunk.js","sourcesContent":["export default {\n    SING_IN: \"SING_IN\",\n    LOGOUT: \"LOGOUT\"\n};\n","import userTypes from \"../constants/user\";\nconst initialState = { user: localStorage.getItem(\"User\") ? JSON.parse(localStorage.getItem(\"User\")): null, token: localStorage.getItem(\"Token\") };\n\nexport function authentication(state = initialState, {payload, type}) {\n    switch (type) {\n        case userTypes.SING_IN:\n            return {...state, user: payload.user, token: payload.token}\n        case userTypes.LOGOUT:\n            return { user: null, token: \"\" };\n        default:\n            return state\n    }\n}\n","import userTypes from \"../constants/user\";\nconst initialState = {list: []};\n\nexport function message(state = initialState, {payload, type}) {\n    switch (type) {\n        case \"GET_MESSAGES\":\n            return {...state, list: payload.messages};\n        case \"NEW_MESSAGE\":\n            return {...state, list: [...state.list, payload.message]}\n        case \"READ_MESSAGE\":\n\n            return {...state, list: state.list.map((message) => {\n                    if (message._id === payload.messageId) {\n                        return Object.assign({}, message, {\n                            read: true\n                        });\n                    }\n                    return message;\n                })};\n        default:\n            return state\n    }\n}\n","const initialState = {list: []};\n\nexport function getOnlineUsers(state = initialState, {payload, type}) {\n    switch (type) {\n        case \"GET_USERS\":\n            return {...state, list: payload.users};\n        case \"NEW_USER\":\n            if (state.list.find(user => user._id == payload.user.id)){\n                return state;\n            }\n            return {...state, list: [...state.list, payload.user]};\n\n        case \"LEAVE_USER\":\n            return {...state, list: state.list.slice().filter((user)=> user._id !== payload.user.id)}\n        default:\n            return state;\n    }\n}\n","import {createStore, applyMiddleware, combineReducers} from 'redux'\nimport {authentication} from \"./reducers/auth\";\nimport thunk from 'redux-thunk';\nimport {message} from \"./reducers/message\";\nimport {getOnlineUsers} from \"./reducers/onlineUsers\";\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nconst rootReducer = combineReducers({\n    auth: authentication,\n    messages: message,\n    onlineUsers: getOnlineUsers\n});\n\nconst store = createStore(rootReducer, composeWithDevTools(\n    applyMiddleware(thunk)));\n\nexport default store;\n","import { useSelector } from 'react-redux';\nimport {Redirect} from \"react-router-dom\";\n\nfunction isAuthHoc(Component) {\n    const Wrapper = (props) => {\n        const token = useSelector((state) => state.auth.token);\n        return <>{token ? <Component {...props} /> : <Redirect exact to=\"/login\" />}</>;\n    };\n    return Wrapper;\n}\n\nexport default isAuthHoc;\n","import io from 'socket.io-client';\nimport store from \"../store\";\n\n\nconst host = process.env.REACT_APP_API_HOST;\nexport default class socketAPI {\n    socket;\n    connect(connectClb,disconnectClb) {\n        this.socket = io(host, {\n            auth: {\n                token: store.getState().auth.token\n            }\n        });\n        return new Promise((resolve, reject) => {\n            this.socket.on('connect', () => {connectClb(); resolve()});\n            this.socket.on('connect_error', (error) => reject(error));\n            return new Promise((resolve, reject) => {\n                this.socket.on('disconnect', () => {disconnectClb(); resolve()});\n            });\n        });\n    }\n    disconnect() {\n        return new Promise((resolve) => {\n            this.socket.disconnect(() => {\n                this.socket = null;\n                resolve();\n            });\n        });\n    }\n    emit(event, data) {\n        return new Promise((resolve, reject) => {\n            if (!this.socket) return reject('No socket connection.');\n            return this.socket.emit(event, data, (response) => {\n                if (response.error) {\n                    console.error(response.error);\n                    return reject(response.error);\n                }\n                return resolve();\n            });\n        });\n    }\n    on(event, fun) {\n        return new Promise((resolve, reject) => {\n            if (!this.socket) return reject('No socket connection.');\n            this.socket.on(event, fun);\n            resolve();\n        });\n    }\n}\n","import axios from \"axios\";\n\nconst api =  axios.create({\n    responseType: \"json\",\n    baseURL: process.env.REACT_APP_API_HOST\n});\n\n\n\nexport default {\n    login: (name) => api.post(\"/login\", {name})\n}\n","import React from \"react\";\nimport {Avatar, List, Typography} from \"antd\";\nimport {CheckOutlined, UserOutlined} from \"@ant-design/icons\";\nimport moment from \"moment\";\n\nconst {Text, Paragraph} = Typography;\n\n\nexport default function Message({date,author,content,read,video}) {\n\n\n\n    const viewSnippet = () => {\n        return (<>\n            <Paragraph>{content}</Paragraph>\n            <iframe id=\"ytplayer\" type=\"text/html\" width=\"640\" height=\"360\"\n                    src={`https://www.youtube.com/embed/${video}`}\n                    frameBorder=\"0\"/>\n                    </>);\n    };\n\n\n    return(\n        <List.Item>\n            <List.Item.Meta\n                avatar={<Avatar style={{ backgroundColor: '#87d068' }}\n                                icon={<UserOutlined />} />}\n                title={<Text strong>{author.name}</Text>}\n                description={video ? viewSnippet() : <Paragraph>{content}</Paragraph>}\n            />\n\n            <List.Item>{moment(date).format(\"HH:mm\")}</List.Item>\n            <List.Item>{read && <CheckOutlined style={{marginLeft:\"10px\"}}/>}</List.Item>\n        </List.Item>\n    )\n}\n\n\n","import React from \"react\";\nimport {Button, Form, Input} from \"antd\";\nimport {SendOutlined} from \"@ant-design/icons\";\n\n\n\nexport default function FieldMessageSend({socket, disabledSend}) {\n    const [form] = Form.useForm();\n\n    const sendMessage = (values) => {\n        socket.emit(\"new message\", {content: values.message});\n        form.resetFields();\n    };\n\n    return(<Form name=\"name\" form={form} onFinish={sendMessage}>\n        <Form.Item name=\"message\" rules={[{ required: true, message: 'Please input your message!' }]} >\n            <Input size=\"large\"\n                   placeholder=\"Enter a new message...\"\n                   suffix={<Button\n                       type=\"primary\"\n                       htmlType=\"submit\"\n                       icon={<SendOutlined/>}\n                       disabled={disabledSend}\n                   />}\n                   style={{height: \"8vh\"}}\n                   type=\"textarea\"\n            />\n        </Form.Item>\n\n    </Form>);\n}\n\n\n","import React, {useEffect, useState} from \"react\";\nimport {Form, Input, Button, List, Layout, Row, Col, Avatar, Typography} from \"antd\";\nimport isAuthHoc from \"../../hocs/auth\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport socketAPI from \"../../api/chat\";\n\nimport {logout} from \"../../store/actions/auth\";\nimport { LogoutOutlined, SendOutlined, UserOutlined} from \"@ant-design/icons\";\nimport {animateScroll} from \"react-scroll\";\n\n\nimport Message from \"../../components/Message\";\nimport FieldMessageSend from \"../../components/FieldMessageSend\";\n\nconst { Content, Footer, Sider} = Layout;\nconst {Text, Title} = Typography;\n\n\nconst styles = {\n    textInSideBar: {\n        color: \"#FFFFFF\"\n    },\n    buttonInSideBar: {\n        margin: \"30px 10px\"\n    },\n};\n\n\nconst socket = new socketAPI();\nfunction Chat() {\n\n    const dispatch = useDispatch();\n    const [disabledSend, disableSend] = useState(true);\n    const [closedSidebar, closeSidebar] = useState(false);\n\n    const messages = useSelector(state => state.messages.list);\n    const user = useSelector(state => state.auth.user);\n\n    const onlineUsers = useSelector(state => state.onlineUsers.list);\n\n\n\n    const viewMessages = (message) => {\n        return(<Message date={message.date} video={message.video ? message.video : null} author={message.author} content={message.content} read={message.read} />)\n    }\n\n    const viewOnlineUsers = (user) => {\n        return(<List.Item>\n            <List.Item.Meta\n            avatar={<Avatar style={{ backgroundColor: '#87d068' }}\n                            icon={<UserOutlined />} />}\n            title={!closedSidebar && <Text style={styles.textInSideBar} strong>{user.name}</Text>}\n\n        />\n        </List.Item>)\n    }\n\n    const singUp = () => {\n        dispatch(logout());\n        socket.disconnect();\n    };\n\n    useEffect(() => {\n        socket.connect(() => disableSend(false),() => disableSend(true)).catch(e => console.log(e.message));\n        socket.on(\"connected\",({onlineUsers,lastsMessages}) => {\n            dispatch({type: \"GET_USERS\", payload: {users: onlineUsers}});\n            const unReadMessages = lastsMessages.filter(message => !message.read);\n            unReadMessages.forEach(message => {\n                user._id !== message.author._id && socket.emit(\"read message\", message._id);\n            })\n            dispatch({type: \"GET_MESSAGES\", payload: {messages: lastsMessages}});\n            animateScroll.scrollToBottom({containerId: \"chat\"})\n        });\n        socket.on(\"new message\", (message) => {\n            dispatch({type: \"NEW_MESSAGE\", payload: {message}});\n            animateScroll.scrollToBottom({containerId: \"chat\"})\n            user._id !== message.author._id && socket.emit(\"read message\", message._id);\n        });\n        socket.on(\"new user\", (user) => dispatch({type: \"NEW_USER\", payload: {user}}));\n        socket.on(\"read message\", (messageId) => dispatch({type: \"READ_MESSAGE\", payload: {messageId}}));\n        socket.on(\"user exit\", (user) => dispatch({type: \"LEAVE_USER\", payload: {user}}))\n        return () => socket.disconnect();\n    }, []);\n    return(\n        <div style={{display: \"flex\", height: \"100%\"}}>\n        <Layout  style={{flexGrow: 0}}>\n            <Sider collapsible onCollapse={(collapsed) => closeSidebar(collapsed)}>\n                <Button onClick={singUp} shape=\"circle\" icon={<LogoutOutlined />} style={styles.buttonInSideBar}></Button>\n                {!closedSidebar && <Title level={5}  style={styles.textInSideBar}>Online users:</Title>}\n                <List style={{paddingLeft: \"20px\"}} split={false} renderItem={viewOnlineUsers} dataSource={onlineUsers}></List>\n            </Sider>\n        </Layout>\n        <Layout style={{paddingLeft: \"30px\"}}>\n         <Content>\n             <List id=\"chat\" style={{maxHeight: \"85vh\", overflowY: \"scroll\"}} renderItem={viewMessages} dataSource={messages} locale={{emptyText: disabledSend ? \"Not connection\" : \"Not messages\"}}></List>\n         </Content>\n        <Footer>\n            <FieldMessageSend socket={socket} disabledSend={disabledSend}/>\n        </Footer>\n    </Layout>\n\n        </div>)\n}\n\nexport default isAuthHoc(Chat);\n","import typesUser from \"../constants/user\"\nimport api from \"../../api/auth\";\n\nexport const login = (userName) =>  dispatch => {\n    api.login(userName).then((response) => {\n        dispatch({type: typesUser.SING_IN, payload: {token: response.data.token, user: response.data.user}});\n        localStorage.setItem(\"Token\", response.data.token);\n        localStorage.setItem(\"User\", JSON.stringify(response.data.user));\n    });\n};\n\nexport const logout = () =>  dispatch => {\n    dispatch({type: typesUser.LOGOUT});\n    localStorage.clear();\n};\n","import {Button, Form, Input, Layout} from \"antd\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {login} from \"../../store/actions/auth\";\nimport {Redirect} from \"react-router-dom\";\n\nfunction Login() {\n    const dispatch = useDispatch();\n    const token = useSelector(state => state.auth.token);\n    const singIn = ({userName}) => {\n       dispatch(login(userName));\n    }\n    return (<Layout>\n        <Form name=\"name\" onFinish={singIn}>\n            <Form.Item label=\"User name\" name=\"userName\">\n                <Input/>\n            </Form.Item>\n            <Form.Item >\n                <Button type=\"primary\" htmlType=\"submit\">Sing in</Button>\n            </Form.Item>\n        </Form>\n        {token && <Redirect to=\"/\"/>}\n    </Layout>);\n}\n\nexport default Login;\n","import React from \"react\";\nimport {HashRouter, Route} from \"react-router-dom\";\nimport Chat from \"./pages/Chat\";\nimport Login from \"./pages/Login\";\nimport \"./styles.scss\";\n\nfunction App() {\n  return ( <div className=\"app\">\n          <HashRouter basename=\"/\">\n                  <Route exact path=\"/\" component={Chat}/>\n                  <Route path=\"/login\" component={Login}/>\n          </HashRouter>\n        </div>);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'antd/dist/antd.css'\nimport {Provider} from \"react-redux\";\nimport store from \"./store\";\nimport App from './App';\nReactDOM.render(\n  <React.StrictMode>\n      <Provider store={store}>\n          <App />\n      </Provider>\n\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}